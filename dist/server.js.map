{"version":3,"sources":["../.yarn/cache/object-assign-npm-4.1.1-1004ad6dec-1f4df99451.zip/node_modules/object-assign/index.js","../.yarn/cache/vary-npm-1.1.2-b49f70ae63-f15d588d79.zip/node_modules/vary/index.js","../.yarn/cache/cors-npm-2.8.5-c9935a2d12-373702b799.zip/node_modules/cors/lib/index.js","../src/server.ts","../src/route/employee-route.ts","../src/helper/async-helper.ts","../src/libs/pg.ts","../src/controller/employee-controller.ts","../src/middleware/validation-middleware.ts","../src/schema/user-schema.ts","../src/route/task-route.ts","../src/controller/task-controller.ts","../src/helper/functions.ts","../src/schema/task-schema.ts","../src/route/chart-route.ts","../src/controller/chart-controller.ts","../src/route/auth-route.ts","../src/controller/auth-controller.ts","../src/error/not-found.ts","../src/error/error.ts"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/*!\n * vary\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n */\n\nmodule.exports = vary\nmodule.exports.append = append\n\n/**\n * RegExp to match field-name in RFC 7230 sec 3.2\n *\n * field-name    = token\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n */\n\nvar FIELD_NAME_REGEXP = /^[!#$%&'*+\\-.^_`|~0-9A-Za-z]+$/\n\n/**\n * Append a field to a vary header.\n *\n * @param {String} header\n * @param {String|Array} field\n * @return {String}\n * @public\n */\n\nfunction append (header, field) {\n  if (typeof header !== 'string') {\n    throw new TypeError('header argument is required')\n  }\n\n  if (!field) {\n    throw new TypeError('field argument is required')\n  }\n\n  // get fields array\n  var fields = !Array.isArray(field)\n    ? parse(String(field))\n    : field\n\n  // assert on invalid field names\n  for (var j = 0; j < fields.length; j++) {\n    if (!FIELD_NAME_REGEXP.test(fields[j])) {\n      throw new TypeError('field argument contains an invalid header name')\n    }\n  }\n\n  // existing, unspecified vary\n  if (header === '*') {\n    return header\n  }\n\n  // enumerate current values\n  var val = header\n  var vals = parse(header.toLowerCase())\n\n  // unspecified vary\n  if (fields.indexOf('*') !== -1 || vals.indexOf('*') !== -1) {\n    return '*'\n  }\n\n  for (var i = 0; i < fields.length; i++) {\n    var fld = fields[i].toLowerCase()\n\n    // append value (case-preserving)\n    if (vals.indexOf(fld) === -1) {\n      vals.push(fld)\n      val = val\n        ? val + ', ' + fields[i]\n        : fields[i]\n    }\n  }\n\n  return val\n}\n\n/**\n * Parse a vary header into an array.\n *\n * @param {String} header\n * @return {Array}\n * @private\n */\n\nfunction parse (header) {\n  var end = 0\n  var list = []\n  var start = 0\n\n  // gather tokens\n  for (var i = 0, len = header.length; i < len; i++) {\n    switch (header.charCodeAt(i)) {\n      case 0x20: /*   */\n        if (start === end) {\n          start = end = i + 1\n        }\n        break\n      case 0x2c: /* , */\n        list.push(header.substring(start, end))\n        start = end = i + 1\n        break\n      default:\n        end = i + 1\n        break\n    }\n  }\n\n  // final token\n  list.push(header.substring(start, end))\n\n  return list\n}\n\n/**\n * Mark that a request is varied on a header field.\n *\n * @param {Object} res\n * @param {String|Array} field\n * @public\n */\n\nfunction vary (res, field) {\n  if (!res || !res.getHeader || !res.setHeader) {\n    // quack quack\n    throw new TypeError('res argument is required')\n  }\n\n  // get existing header\n  var val = res.getHeader('Vary') || ''\n  var header = Array.isArray(val)\n    ? val.join(', ')\n    : String(val)\n\n  // set new header\n  if ((val = append(header, field))) {\n    res.setHeader('Vary', val)\n  }\n}\n","(function () {\n\n  'use strict';\n\n  var assign = require('object-assign');\n  var vary = require('vary');\n\n  var defaults = {\n    origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n    preflightContinue: false,\n    optionsSuccessStatus: 204\n  };\n\n  function isString(s) {\n    return typeof s === 'string' || s instanceof String;\n  }\n\n  function isOriginAllowed(origin, allowedOrigin) {\n    if (Array.isArray(allowedOrigin)) {\n      for (var i = 0; i < allowedOrigin.length; ++i) {\n        if (isOriginAllowed(origin, allowedOrigin[i])) {\n          return true;\n        }\n      }\n      return false;\n    } else if (isString(allowedOrigin)) {\n      return origin === allowedOrigin;\n    } else if (allowedOrigin instanceof RegExp) {\n      return allowedOrigin.test(origin);\n    } else {\n      return !!allowedOrigin;\n    }\n  }\n\n  function configureOrigin(options, req) {\n    var requestOrigin = req.headers.origin,\n      headers = [],\n      isAllowed;\n\n    if (!options.origin || options.origin === '*') {\n      // allow any origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: '*'\n      }]);\n    } else if (isString(options.origin)) {\n      // fixed origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: options.origin\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    } else {\n      isAllowed = isOriginAllowed(requestOrigin, options.origin);\n      // reflect origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: isAllowed ? requestOrigin : false\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureMethods(options) {\n    var methods = options.methods;\n    if (methods.join) {\n      methods = options.methods.join(','); // .methods is an array, so turn it into a string\n    }\n    return {\n      key: 'Access-Control-Allow-Methods',\n      value: methods\n    };\n  }\n\n  function configureCredentials(options) {\n    if (options.credentials === true) {\n      return {\n        key: 'Access-Control-Allow-Credentials',\n        value: 'true'\n      };\n    }\n    return null;\n  }\n\n  function configureAllowedHeaders(options, req) {\n    var allowedHeaders = options.allowedHeaders || options.headers;\n    var headers = [];\n\n    if (!allowedHeaders) {\n      allowedHeaders = req.headers['access-control-request-headers']; // .headers wasn't specified, so reflect the request headers\n      headers.push([{\n        key: 'Vary',\n        value: 'Access-Control-Request-Headers'\n      }]);\n    } else if (allowedHeaders.join) {\n      allowedHeaders = allowedHeaders.join(','); // .headers is an array, so turn it into a string\n    }\n    if (allowedHeaders && allowedHeaders.length) {\n      headers.push([{\n        key: 'Access-Control-Allow-Headers',\n        value: allowedHeaders\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureExposedHeaders(options) {\n    var headers = options.exposedHeaders;\n    if (!headers) {\n      return null;\n    } else if (headers.join) {\n      headers = headers.join(','); // .headers is an array, so turn it into a string\n    }\n    if (headers && headers.length) {\n      return {\n        key: 'Access-Control-Expose-Headers',\n        value: headers\n      };\n    }\n    return null;\n  }\n\n  function configureMaxAge(options) {\n    var maxAge = (typeof options.maxAge === 'number' || options.maxAge) && options.maxAge.toString()\n    if (maxAge && maxAge.length) {\n      return {\n        key: 'Access-Control-Max-Age',\n        value: maxAge\n      };\n    }\n    return null;\n  }\n\n  function applyHeaders(headers, res) {\n    for (var i = 0, n = headers.length; i < n; i++) {\n      var header = headers[i];\n      if (header) {\n        if (Array.isArray(header)) {\n          applyHeaders(header, res);\n        } else if (header.key === 'Vary' && header.value) {\n          vary(res, header.value);\n        } else if (header.value) {\n          res.setHeader(header.key, header.value);\n        }\n      }\n    }\n  }\n\n  function cors(options, req, res, next) {\n    var headers = [],\n      method = req.method && req.method.toUpperCase && req.method.toUpperCase();\n\n    if (method === 'OPTIONS') {\n      // preflight\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureMethods(options, req));\n      headers.push(configureAllowedHeaders(options, req));\n      headers.push(configureMaxAge(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n\n      if (options.preflightContinue) {\n        next();\n      } else {\n        // Safari (and potentially other browsers) need content-length 0,\n        //   for 204 or they just hang waiting for a body\n        res.statusCode = options.optionsSuccessStatus;\n        res.setHeader('Content-Length', '0');\n        res.end();\n      }\n    } else {\n      // actual response\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n      next();\n    }\n  }\n\n  function middlewareWrapper(o) {\n    // if options are static (either via defaults or custom options passed in), wrap in a function\n    var optionsCallback = null;\n    if (typeof o === 'function') {\n      optionsCallback = o;\n    } else {\n      optionsCallback = function (req, cb) {\n        cb(null, o);\n      };\n    }\n\n    return function corsMiddleware(req, res, next) {\n      optionsCallback(req, function (err, options) {\n        if (err) {\n          next(err);\n        } else {\n          var corsOptions = assign({}, defaults, options);\n          var originCallback = null;\n          if (corsOptions.origin && typeof corsOptions.origin === 'function') {\n            originCallback = corsOptions.origin;\n          } else if (corsOptions.origin) {\n            originCallback = function (origin, cb) {\n              cb(null, corsOptions.origin);\n            };\n          }\n\n          if (originCallback) {\n            originCallback(req.headers.origin, function (err2, origin) {\n              if (err2 || !origin) {\n                next(err2);\n              } else {\n                corsOptions.origin = origin;\n                cors(corsOptions, req, res, next);\n              }\n            });\n          } else {\n            next();\n          }\n        }\n      });\n    };\n  }\n\n  // can pass either an options hash, an options delegate, or nothing\n  module.exports = middlewareWrapper;\n\n}());\n","import 'dotenv/config'\nrequire('dotenv').config()\n\nimport express from \"express\";\nimport employeeRouter from \"./route/employee-route\";\nimport taskRouter from \"./route/task-route\";\nimport chartRouter from \"./route/chart-route\";\nimport authRouter from \"./route/auth-route\";\nimport cors from \"cors\"\nimport helmet from \"helmet\";\nimport db from \"./libs/pg\"\nimport { notFoundHandler } from \"./error/not-found\";\nimport { errorHandler } from \"./error/error\";\nimport { verifyToken } from './middleware/token-middleware';\nimport fileUpload from 'express-fileupload';\nimport cookieParser from 'cookie-parser';\n\nconst asyncHandler = async () => {\n  await db.connect()\n  const app = express();\n  const PORT = process.env.PORT || 8080;\n\n  app.use(cookieParser())\n  app.use(helmet());\n  app.use(cors());\n  app.use(fileUpload({\n    limits: {\n      fileSize: 10000000,\n    },\n    abortOnLimit: true,\n  }))\n  app.use(express.json());\n  app.use(express.urlencoded({ extended: true }))\n\n  app.use(express.static('public'));\n\n  app.use('/api/auth/', authRouter)\n  app.use('/api/employees/', employeeRouter)\n  app.use('/api/tasks/', taskRouter)\n  app.use('/api/charts/', chartRouter)\n\n  app.use(notFoundHandler);\n  app.use(errorHandler);\n\n  app.listen(PORT, () =>\n    console.log(`Server is running on http://localhost/${PORT}`)\n  );\n\n}\n\nvoid asyncHandler()\n","import express from \"express\";\nimport { createEmployee, deleteEmployee, getAllEmployees, getEmployeeById, updateProfile } from \"../controller/employee-controller\";\nimport { validateData } from \"../middleware/validation-middleware\";\nimport { CreateUserSchema, UpdateUserProfileSchema } from \"../schema/user-schema\";\nconst route = express.Router();\n\nroute.get('/', getAllEmployees);\nroute.post('/', validateData(CreateUserSchema), createEmployee);\nroute.delete('/:user_id', deleteEmployee);\nroute.get('/:user_id', getEmployeeById);\nroute.put('/:user_id?', validateData(UpdateUserProfileSchema), updateProfile);\n\nexport default route;","import { NextFunction, Request, Response } from \"express\";\n\ntype AsyncHandlerFunction = (req: Request, res: Response) => Promise<any>;\n\nexport const asyncHandler = (asyncFnc: AsyncHandlerFunction) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    Promise.resolve(asyncFnc(req, res)).catch(next);\n  };\n};\n","import { Client, Pool, QueryResult, QueryResultRow } from 'pg';\n\nlet client: Pool | null = null;\n\n\n\nconst connect = async (): Promise<void> => {\n  console.log(\"Connecting to DB\");\n\n  client = new Pool({\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD,\n    host: process.env.DB_HOST,\n    port: Number(process.env.DB_PORT),\n    database: process.env.DB_NAME,\n  });\n\n  try {\n    await client.query(\"SELECT 1+1\");\n    // await client.connect();\n    console.log(\"Connected to DB\");\n  } catch (error) {\n    console.error(\"Failed to connect to DB\", error);\n    throw error;\n  }\n};\n\nexport const query = async <TResult = any>(sql: string, params?: any[], log = process.env.LOG): Promise<QueryResult<TResult> | undefined> => {\n  if (client) {\n    try {\n      if (log) {\n        console.log(sql, JSON.stringify(params));\n      }\n      return await client.query<TResult>(sql, params);\n    } catch (error) {\n      console.error(\"Query failed\", error);\n      throw new Error(\"Database Error\");\n    }\n  }\n  console.log(\"Not connected to DB\");\n  return undefined;\n};\n\nconst disconnect = async (): Promise<void> => {\n  if (client) {\n    console.log(\"Disconnecting from DB\");\n    try {\n      await client.end();\n      console.log(\"Disconnected from DB\");\n    } catch (error) {\n      console.error(\"Failed to disconnect from DB\", error);\n      throw error;\n    }\n  } else {\n    console.log(\"Not connected to DB\");\n  }\n};\n\nexport default { connect, disconnect };\n\n\n\n\n// import { Pool, PoolConfig, QueryResult } from \"pg\";\n\n// const poolConfig: PoolConfig = {\n//    user: process.env.DB_USER,\n//     password:  process.env.DB_PASSWORD,\n//     host: process.env.DB_HOST,\n//     port: Number(process.env.DB_PORT),\n//     database: process.env.DB_NAME,\n// }\n\n// const pool = new Pool(poolConfig);\n\n// export const query = async (query: string, params?: any[]): Promise<QueryResult<any> | undefined> => {\n//   try{\n//     return await pool.query(query, params);\n//   } catch (error) {\n//     console.log(\"Query failed:\", error);\n//     return undefined\n//   }\n// }\n\n// const disconnect = async (): Promise<void> => {\n//   try {\n//     console.log(\"Disconnecting from DB\");\n//     await pool.end();\n//     console.log(\"Disconnected from DB\");\n//   } catch (error) {\n//     console.error(\"Failed to disconnect from DB:\", error);\n//   }\n// }\n\n// export default {disconnect}","import { Request, Response } from \"express\";\nimport { asyncHandler } from \"../helper/async-helper\";\nimport { query } from \"../libs/pg\";\nimport { StatusCodes } from \"http-status-codes\";\nimport { ErrorResponse, SuccessResponse } from \"../types\";\nimport fileUpload from \"express-fileupload\";\n\ntype Employee = {\n  id?: number;\n  email: string;\n  full_name: string;\n  username: string;\n  role_name: string;\n  display_name: string;\n}\n\ntype EmployeeRequest = Request<undefined, SuccessResponse<Employee[]>, {\n  email: string,\n  full_name: string,\n  username: string,\n  password: string,\n  role_id: number,\n}, {\n  search: string;\n  limit: string;\n  page: string;\n}>\n\n// @desc  Get all users\n// @route GET /api/employees\nexport const getAllEmployees = asyncHandler(async (req: EmployeeRequest, res: Response): Promise<void> => {\n  const whereClauses: any[] = []\n  const queryParams: any[] = []\n  let limitQuery: string = '';\n  let offsetQuery: string = '';\n  let searchStr: string | undefined = req.query.search;\n\n  if (searchStr) {\n    whereClauses.push(`u::text ILIKE $${queryParams.length + 1} OR r::text ILIKE $${queryParams.length + 1}`)\n    queryParams.push(`%${searchStr}%`)\n  }\n  const limit = parseInt(req.query.limit as string, 10) || 10;\n  const page = parseInt(req.query.page as string, 10) || 1;\n\n  limitQuery = `LIMIT $${queryParams.length + 1}`;\n  queryParams.push(limit);\n\n  offsetQuery = `OFFSET $${queryParams.length + 1}`;\n  queryParams.push((page - 1) * limit);\n\n  const whereClause = whereClauses.length > 0 ? ' WHERE ' + whereClauses.join(' AND ') : '';\n\n  const queryString = `\n    SELECT u.id, u.email, u.full_name, r.role_name AS role, r.display_name AS role_display_name\n    FROM users u \n    LEFT JOIN roles r ON u.role_id = r.id \n    ${whereClause}\n    ORDER BY u.id ASC\n    ${limitQuery}\n    ${offsetQuery}\n  `;\n\n  const countQueryString = `\n    SELECT COUNT(*) AS total \n    FROM users u \n    LEFT JOIN roles r ON u.role_id = r.id \n    ${whereClause}\n    \n  `;\n\n  const result = await query<Employee>(queryString, queryParams)\n\n  const countResult = await query<{ total: number }>(countQueryString, searchStr ? [queryParams[0]] : []);\n\n  const totalRecords = parseInt(countResult?.rows[0]?.total || 0);\n  const totalPages = Math.ceil(totalRecords / limit);\n  const currentPage = page;\n\n  const successResponse: SuccessResponse<{\n    totalItems: number;\n    employees: Employee[] | undefined;\n    totalPages: number;\n    currentPage: number;\n    limit?: number;\n    search?: string | null;\n  }> = {\n    status: StatusCodes.OK,\n    success: true,\n    data: {\n      totalItems: totalRecords,\n      employees: result?.rows,\n      totalPages: totalPages,\n      currentPage: currentPage,\n      limit,\n      search: searchStr || null\n    }\n  };\n\n  res.status(StatusCodes.OK).json(successResponse);\n});\n\n// @desc  Get user by id\n// @route GET /api/employees:user_id\nexport const getEmployeeById = asyncHandler(async (req: Request, res: Response): Promise<void> => {\n  const user_id = req.params.user_id;\n\n  const result = await query<Employee>(\n    `\n    SELECT u.id, u.email, u.full_name, u.username, r.role_name, r.display_name FROM users u\n    WHERE user_id=$1\n    LEFT JOIN roles r ON u.role_id = r.id \n    ORDER BY id ASC\n    `,\n    [user_id]\n  )\n\n  const successResponse: SuccessResponse<Employee[]> = {\n    status: StatusCodes.OK,\n    success: true,\n    data: result ? (result.rows) : [],\n  };\n\n  res.status(StatusCodes.OK).json(successResponse);\n});\n\n// @desc  Delete a user\n// @route DELETE /api/employees:user_id\nexport const deleteEmployee = asyncHandler(async (req: Request, res: Response): Promise<void> => {\n  const user_id: number = parseInt(req.params.user_id)\n\n  await query(\n    `DELETE FROM users WHERE id=$1`,\n    [user_id]\n  )\n\n  const successResponse: SuccessResponse<Employee[]> = {\n    status: StatusCodes.OK,\n    success: true,\n    message: `User with id ${user_id} has been deleted`,\n  };\n\n  res.status(StatusCodes.OK).json(successResponse);\n})\n\n// @desc Create a user\n// @route POST /api/employees\nexport const createEmployee = asyncHandler(async (req: EmployeeRequest, res: Response): Promise<void> => {\n  const { email, full_name, username, password, role_id } = req.body\n\n  const result = await query(\n    `INSERT INTO public.\"users\" (email, full_name, username, password, role_id) VALUES ($1, $2, $3, $4, $5) RETURNING *`,\n    [email, full_name, username, password, role_id]\n  )\n\n  const successResponse: SuccessResponse<Employee> = {\n    status: StatusCodes.CREATED,\n    success: true,\n    message: `User is created successfully`,\n    data: result?.rows.at(0)\n  };\n\n  res.status(StatusCodes.OK).json(successResponse);\n})\n\n// @desc Update Current User Profile\n// @route PUT /api/employees\nexport const updateProfile = asyncHandler(async (req: EmployeeRequest, res: Response) => {\n  let user_id = Number(0)\n\n  if (req.params.user_id) {\n    user_id = parseInt(req.params.user_id)\n  } else {\n    // const user_id = req.user.id;\n    const user_id = 1;\n  }\n\n  const { email, full_name, username, password } = req.body;\n\n  const image = req.files?.profile_pic\n  let image_name: string | null = null;\n\n  if (image) {\n    if (!/^image/.test(image.mimetype)) throw new Error(\"Uploaded file is not an image\");\n\n    image_name = image.name\n    image.mv(__dirname + '/profile_pic/' + image_name)\n  }\n\n  const result = await query<Employee>(\n    `UPDATE public.\"users\" SET email=$1, full_name=$2, username=$3, password=$4, profile_pic=$5 WHERE id=$6 RETURNING *`,\n    [email, full_name, username, password, image_name, user_id]\n  )\n\n  const successResponse: SuccessResponse<Employee> = {\n    status: StatusCodes.OK,\n    success: true,\n    message: `User updated successfully`,\n    data: result?.rows.at(0)\n  };\n\n  res.status(StatusCodes.OK).json(successResponse);\n})","import { Request, Response, NextFunction } from 'express';\nimport { z, ZodError } from 'zod';\n\nimport { StatusCodes } from 'http-status-codes';\nimport { ErrorResponse } from '../types';\n\nexport function validateData(schema: z.ZodObject<any, any>) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    try {\n      schema.parse(req.body);\n      next();\n    } catch (error) {\n      if (error instanceof ZodError) {\n        const errorMessages = error.errors.reduce((acc: any, issue: any) => {\n          acc[issue.path.join('.')] = issue.message;\n          return acc;\n        }, {});\n\n        const errorResponse: ErrorResponse = {\n          status: StatusCodes.BAD_REQUEST,\n          message: errorMessages\n        }\n\n        res.status(StatusCodes.BAD_REQUEST).json(errorResponse);\n      } else {\n        res.status(StatusCodes.INTERNAL_SERVER_ERROR).json({ error: 'Internal Server Error' });\n      }\n    }\n  };\n}","import { z } from \"zod\"\n\nexport const CreateUserSchema = z.object({\n  email: z.string({ message: \"The email field is required\" })\n    .email({ message: \"Please provide a valid email address\" })\n    .min(1, { message: \"The email field cannot be empty\" })\n    .max(100, { message: \"The email address cannot exceed 100 characters\" }),\n\n  password: z.string({ message: \"The password field is required\" })\n    .min(1, { message: \"The password field cannot be empty\" })\n    .max(100, { message: \"The password cannot exceed 100 characters\" }),\n\n  full_name: z.string({ message: \"The full name field is required\" })\n    .min(1, { message: \"The full name field cannot be empty\" })\n    .max(100, { message: \"The full name cannot exceed 100 characters\" }),\n\n  username: z.string({ message: \"The username field is required\" })\n    .min(1, { message: \"The username field cannot be empty\" })\n    .max(100, { message: \"The username cannot exceed 100 characters\" }),\n\n  role_id: z.number({ message: \"The role ID field is required\" })\n    .min(1, { message: \"Role ID must be at least 1\" })\n});\n\nexport const UpdateUserProfileSchema = z.object({\n  email: z.string({ message: \"The email field is required\" })\n    .email({ message: \"Please provide a valid email address\" })\n    .min(1, { message: \"The email field cannot be empty\" })\n    .max(100, { message: \"The email address cannot exceed 100 characters\" }),\n\n  password: z.string({ message: \"The password field is required\" })\n    .min(1, { message: \"The password field cannot be empty\" })\n    .max(100, { message: \"The password cannot exceed 100 characters\" }),\n\n  full_name: z.string({ message: \"The full name field is required\" })\n    .min(1, { message: \"The full name field cannot be empty\" })\n    .max(100, { message: \"The full name cannot exceed 100 characters\" }),\n\n  username: z.string({ message: \"The username field is required\" })\n    .min(1, { message: \"The username field cannot be empty\" })\n    .max(100, { message: \"The username cannot exceed 100 characters\" }),\n});","import express from \"express\"\nimport { deleteTask, getTaskByUserId, saveTask } from \"../controller/task-controller\";\nimport { validateData } from \"../middleware/validation-middleware\";\nimport { taskDataSchema } from \"../schema/task-schema\";\nconst route = express.Router();\n\nroute.post('/', validateData(taskDataSchema), saveTask)\nroute.get('/', getTaskByUserId)\nroute.delete('/:task_id', deleteTask)\n\nexport default route","import { Request, Response } from \"express\";\nimport { query } from \"../libs/pg\";\nimport { ErrorResponse, SuccessResponse } from \"../types\";\nimport { StatusCodes } from \"http-status-codes\";\nimport { asyncHandler } from \"../helper/async-helper\";\nimport { fetchTasksByUserId } from \"../helper/functions\";\n\ntype Task = {\n  id?: number;\n  user_id?: number;\n  description: string;\n  start: Date;\n  end: Date;\n  project: string;\n}\n\n\ninterface TaskRequest extends Request {\n  body: {\n    data?: Task[];\n  }\n}\n\n// @desc  Save a new task\n// @route POST /api/tasks/\nexport const saveTask = asyncHandler(async (req: TaskRequest, res: Response) => {\n  const tasks = req.body.data;\n  // const user_id = req.user.id;\n  const user_id = 1;\n\n  try {\n    await query(\"BEGIN\")\n\n    const q: string[] = [];\n    const params: string[] = [];\n    tasks?.forEach((task, index) => {\n      const baseIndex = index * 5;\n      q.push(`($${baseIndex + 1}, $${baseIndex + 2}, $${baseIndex + 3}, $${baseIndex + 4}, $${baseIndex + 5})`);\n\n      params.push(`${task.project}`)\n      params.push(`${task.description}`)\n      params.push(`${task.start}`)\n      params.push(`${task.end}`)\n      params.push(`${user_id}`)\n    })\n\n    const queryStr = `INSERT INTO tasks (project, description, start, \"end\", user_id) VALUES ` + q.join(', ') + `RETURNING *`;\n\n    const task_result = await query<Task>(queryStr, params)\n    await query(\"COMMIT\")\n\n    const successResponse: SuccessResponse<Task[]> = {\n      status: StatusCodes.CREATED,\n      success: true,\n      message: `Report created succesfully for user ${user_id}`,\n      data: task_result?.rows\n    }\n\n    res.status(StatusCodes.OK).json(successResponse)\n  } catch (error) {\n    await query(\"ROLLBACK\")\n\n    const errorResponse: ErrorResponse = {\n      status: StatusCodes.BAD_REQUEST,\n      message: `Something's wrong`\n    }\n\n    res.status(StatusCodes.INTERNAL_SERVER_ERROR).json(errorResponse)\n  }\n})\n\n// @desc  Get all tasks for a certain user\n// @route GET /api/tasks/\nexport const getTaskByUserId = asyncHandler(async (req: TaskRequest, res: Response) => {\n  // const user_id = req.user.id;\n  const user_id = 1\n\n  const task_result = await fetchTasksByUserId(user_id);\n\n  const successResponse: SuccessResponse<Task[]> = {\n    status: StatusCodes.OK,\n    success: true,\n    data: task_result\n  };\n\n  res.status(StatusCodes.OK).json(successResponse);\n});\n\n// @desc  Delete a task\n// @route DELETE /api/tasks/:task_id\nexport const deleteTask = asyncHandler(async (req: Request, res: Response) => {\n  const task_id = Number(req.params.task_id);\n\n  await query(\n    `DELETE FROM tasks WHERE id=$1`,\n    [task_id]\n  )\n\n  const successResponse: SuccessResponse<any> = {\n    status: StatusCodes.OK,\n    success: true,\n    message: `Task with id ${task_id} has been deleted`\n  }\n\n  res.status(StatusCodes.OK).json(successResponse)\n})\n\n","import { query } from \"../libs/pg\";\nimport { Period, Task } from \"../types\";\n\n// @desc Calculate total working of hours of given time\nconst calculateWorkingHours = (start: Date, end: Date): number => {\n  if (start >= end) {\n    throw new Error('End time must be after start time');\n  }\n\n  const differenceInMilliseconds = end.getTime() - start.getTime();\n\n  const differenceInHours = differenceInMilliseconds / (1000 * 60 * 60);\n\n  return differenceInHours;\n};\n\n// @desc Extract full date from timestamp\nconst getFullDate = (date: Date) => {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n\n  const formattedDate = `${year}-${month}-${day}`;\n\n  return formattedDate;\n}\n\nexport const getDailyWorkingHours = (tasks: { start: Date, end: Date }[]) => {\n  const dailyHours: { [key: string]: number } = {};\n\n  tasks.forEach((task) => {\n    const date = getFullDate(task.start);\n    if (!dailyHours[date]) {\n      dailyHours[date] = 0;\n    }\n    dailyHours[date] += calculateWorkingHours(task.start, task.end);\n  });\n\n  const option = Object.keys(dailyHours).sort();\n  const series = option.map(date => dailyHours[date]);\n\n  return { option, series }\n}\n\nexport const fetchTasksByUserId = async (userId: number, period: Period = null) => {\n  // let taskResult;\n  let filterByPeriodStr: string = ''\n\n  switch (period) {\n    case \"weekly\":\n      filterByPeriodStr = `AND start >= date_trunc('week', current_timestamp) AND start < date_trunc('week', current_timestamp) + interval '1 week'`;\n      break;\n    case \"monthly\":\n      filterByPeriodStr = `AND start >= date_trunc('month', current_timestamp) AND start < date_trunc('month', current_timestamp) + interval '1 month'`\n      break;\n    default:\n      break;\n  }\n\n  const queryStr = `\n    SELECT start, \"end\" FROM tasks \n    WHERE user_id=$1 \n    ${filterByPeriodStr}\n    ORDER BY start, \"end\" ASC`\n\n  const taskResult = await query<{\n    start: Date;\n    end: Date;\n  }>(queryStr, [userId]);\n\n  return taskResult?.rows ?? [];\n};","import { z } from \"zod\";\n\nconst taskItemSchema = z.object({\n  project: z.string()\n    .min(1, { message: \"Project name is required\" }),\n  description: z.string()\n    .min(1, { message: \"Description is required\" }),\n  start: z.string()\n    .min(1, { message: \"Start time is required\" }),\n  end: z.string()\n    .min(1, { message: \"End time is required\" }),\n});\n\nexport const taskDataSchema = z.object({\n  data: z.array(taskItemSchema)\n    .min(1, { message: \"At least one task item is required\" }),\n});","import express from \"express\"\nimport { getChartData } from \"../controller/chart-controller\"\nconst route = express.Router()\n\nroute.get('/:model', getChartData)\n\nexport default route","import { Request, Response } from \"express\";\nimport { asyncHandler } from \"../helper/async-helper\";\nimport { ErrorResponse, SuccessResponse } from \"../types\";\nimport { StatusCodes } from \"http-status-codes\";\nimport { fetchTasksByUserId, getDailyWorkingHours } from \"../helper/functions\";\n\ntype PieChartResponse = {\n  weeklyHours: number;\n  monthlyHours: number;\n}\n\ntype BarChartResponse = {\n  series: number[],\n  option: string[]\n}\n\n// @desc  Get required data for the bar chart\n// @route GET /api/charts/:model\nexport const getChartData = asyncHandler(async (req: Request, res: Response) => {\n  const user_id = 1;\n  const model: string = req.params.model;\n\n  let responseData;\n\n  switch (model) {\n    case \"bar\":\n      responseData = await getBarChart(user_id);\n      break;\n    case \"pie\":\n      responseData = await getPieChart(user_id);\n      break;\n    default:\n      const errorResponse: ErrorResponse = {\n        status: StatusCodes.BAD_REQUEST,\n        message: \"Invalid chart model\"\n      }\n\n      res.status(StatusCodes.BAD_REQUEST).json(errorResponse);\n      return;\n  }\n\n  const successResponse: SuccessResponse<BarChartResponse | PieChartResponse> = {\n    status: StatusCodes.OK,\n    success: true,\n    data: responseData\n  }\n\n  res.status(StatusCodes.OK).json(successResponse);\n})\n\nconst getPieChart = async (user_id: number) => {\n  const [monthlyTasks, weeklyTasks] = await Promise.all([\n    fetchTasksByUserId(user_id, \"monthly\"),\n    fetchTasksByUserId(user_id, \"weekly\")\n  ]);\n\n  const { series: monthlySeries } = getDailyWorkingHours(monthlyTasks);\n  const { series: weeklySeries } = getDailyWorkingHours(weeklyTasks);\n\n\n  const weeklyHours = weeklySeries.reduce((series, val) => {\n    return series + val\n  }, 0)\n\n  const monthlyHours = monthlySeries.reduce((series, val) => {\n    return series + val\n  }, 0)\n\n  return { weeklyHours, monthlyHours }\n}\n\nconst getBarChart = async (user_id: number) => {\n  const tasks = await fetchTasksByUserId(user_id, \"weekly\")\n\n  const { series, option } = getDailyWorkingHours(tasks);\n\n  return {\n    option,\n    series\n  }\n}","import express from \"express\"\nimport { login, logout } from \"../controller/auth-controller\"\nconst route = express.Router()\n\nroute.post('/', login);\nroute.post('/logout', logout);\n\nexport default route","import { Request, Response } from \"express\";\nimport { asyncHandler } from \"../helper/async-helper\";\nimport { query } from \"../libs/pg\";\nimport { StatusCodes } from \"http-status-codes\";\nimport { ErrorResponse, SuccessResponse } from \"../types\";\nimport jwt from \"jsonwebtoken\"\n\ntype User = {\n  id?: number;\n  email: string;\n  full_name: string;\n  username: string;\n  role_name: string;\n  display_name: string;\n}\n\ninterface LoginRequest extends Request {\n  body: {\n    email: string;\n    password: string;\n  }\n}\n\nexport const login = asyncHandler(async (req: LoginRequest, res: Response) => {\n  const { email, password } = req.body;\n\n  const result = await query<User>(\n    `SELECT u.id, u.email, u.full_name, u.username, r.role_name, r.display_name\n   FROM public.\"users\" u\n   JOIN roles r ON u.role_id = r.id\n   WHERE u.email=$1 AND u.password=$2`,\n    [email, password]\n  )\n\n  if (result?.rowCount < 1) {\n    const errorResponse: ErrorResponse = {\n      status: StatusCodes.NOT_FOUND,\n      message: \"User with email or password specified, are not found\"\n    }\n    return res.status(StatusCodes.BAD_REQUEST).json(errorResponse)\n  }\n\n  const user = result?.rows.at(0);\n\n  const token = jwt.sign({ user }, 'test', { expiresIn: '1h' })\n\n  const successResponse: SuccessResponse<any> = {\n    status: StatusCodes.OK,\n    success: true,\n    message: \"Login Successfull\",\n    data: token\n  }\n\n  res.cookie(\"access_token\", `${token}`, {\n    httpOnly: true,\n    secure: false\n  }).status(StatusCodes.OK).json(successResponse);\n})\n\nexport const logout = (req: Request, res: Response) => {\n  const successResponse: SuccessResponse<any> = {\n    status: StatusCodes.OK,\n    success: true,\n    message: \"Logout Successfull\",\n  }\n\n  return res\n    .clearCookie(\"access_token\")\n    .status(StatusCodes.OK)\n    .json(successResponse);\n};","import { Request, Response } from \"express\";\nimport { ErrorResponse } from \"../types\";\nimport { StatusCodes } from \"http-status-codes\";\n\nexport const notFoundHandler = (req: Request, res: Response) => {\n  const response: ErrorResponse = {\n    status: StatusCodes.NOT_FOUND,\n    message: `Not found: ${req.originalUrl}`\n  }\n\n  res.status(404).json(response);\n};\n","import { NextFunction, Request, Response } from \"express\";\nimport { ErrorResponse } from \"../types\";\nimport { StatusCodes } from \"http-status-codes\";\n\nexport const errorHandler = (error: Error, req: Request, res: Response, next: NextFunction): any => {\n  const response: ErrorResponse = {\n    status: StatusCodes.INTERNAL_SERVER_ERROR,\n    message: error.message\n  }\n\n  console.log(error);\n\n  return res.status(StatusCodes.INTERNAL_SERVER_ERROR).json(response);\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA,sGAAAA,UAAAC,SAAA;AAAA;AAQA,QAAI,wBAAwB,OAAO;AACnC,QAAI,iBAAiB,OAAO,UAAU;AACtC,QAAI,mBAAmB,OAAO,UAAU;AAExC,aAAS,SAAS,KAAK;AACtB,UAAI,QAAQ,QAAQ,QAAQ,QAAW;AACtC,cAAM,IAAI,UAAU,uDAAuD;AAAA,MAC5E;AAEA,aAAO,OAAO,GAAG;AAAA,IAClB;AAEA,aAAS,kBAAkB;AAC1B,UAAI;AACH,YAAI,CAAC,OAAO,QAAQ;AACnB,iBAAO;AAAA,QACR;AAKA,YAAI,QAAQ,IAAI,OAAO,KAAK;AAC5B,cAAM,CAAC,IAAI;AACX,YAAI,OAAO,oBAAoB,KAAK,EAAE,CAAC,MAAM,KAAK;AACjD,iBAAO;AAAA,QACR;AAGA,YAAI,QAAQ,CAAC;AACb,iBAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAC5B,gBAAM,MAAM,OAAO,aAAa,CAAC,CAAC,IAAI;AAAA,QACvC;AACA,YAAI,SAAS,OAAO,oBAAoB,KAAK,EAAE,IAAI,SAAU,GAAG;AAC/D,iBAAO,MAAM,CAAC;AAAA,QACf,CAAC;AACD,YAAI,OAAO,KAAK,EAAE,MAAM,cAAc;AACrC,iBAAO;AAAA,QACR;AAGA,YAAI,QAAQ,CAAC;AACb,+BAAuB,MAAM,EAAE,EAAE,QAAQ,SAAU,QAAQ;AAC1D,gBAAM,MAAM,IAAI;AAAA,QACjB,CAAC;AACD,YAAI,OAAO,KAAK,OAAO,OAAO,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,EAAE,MAC/C,wBAAwB;AACzB,iBAAO;AAAA,QACR;AAEA,eAAO;AAAA,MACR,SAAS,KAAK;AAEb,eAAO;AAAA,MACR;AAAA,IACD;AAEA,IAAAA,QAAO,UAAU,gBAAgB,IAAI,OAAO,SAAS,SAAU,QAAQ,QAAQ;AAC9E,UAAI;AACJ,UAAI,KAAK,SAAS,MAAM;AACxB,UAAI;AAEJ,eAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AAC1C,eAAO,OAAO,UAAU,CAAC,CAAC;AAE1B,iBAAS,OAAO,MAAM;AACrB,cAAI,eAAe,KAAK,MAAM,GAAG,GAAG;AACnC,eAAG,GAAG,IAAI,KAAK,GAAG;AAAA,UACnB;AAAA,QACD;AAEA,YAAI,uBAAuB;AAC1B,oBAAU,sBAAsB,IAAI;AACpC,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACxC,gBAAI,iBAAiB,KAAK,MAAM,QAAQ,CAAC,CAAC,GAAG;AAC5C,iBAAG,QAAQ,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC;AAAA,YACjC;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAEA,aAAO;AAAA,IACR;AAAA;AAAA;;;ACzFA;AAAA,oFAAAC,UAAAC,SAAA;AAAA;AAYA,IAAAA,QAAO,UAAU;AACjB,IAAAA,QAAO,QAAQ,SAAS;AAaxB,QAAI,oBAAoB;AAWxB,aAAS,OAAQ,QAAQ,OAAO;AAC9B,UAAI,OAAO,WAAW,UAAU;AAC9B,cAAM,IAAI,UAAU,6BAA6B;AAAA,MACnD;AAEA,UAAI,CAAC,OAAO;AACV,cAAM,IAAI,UAAU,4BAA4B;AAAA,MAClD;AAGA,UAAI,SAAS,CAAC,MAAM,QAAQ,KAAK,IAC7B,MAAM,OAAO,KAAK,CAAC,IACnB;AAGJ,eAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,YAAI,CAAC,kBAAkB,KAAK,OAAO,CAAC,CAAC,GAAG;AACtC,gBAAM,IAAI,UAAU,gDAAgD;AAAA,QACtE;AAAA,MACF;AAGA,UAAI,WAAW,KAAK;AAClB,eAAO;AAAA,MACT;AAGA,UAAI,MAAM;AACV,UAAI,OAAO,MAAM,OAAO,YAAY,CAAC;AAGrC,UAAI,OAAO,QAAQ,GAAG,MAAM,MAAM,KAAK,QAAQ,GAAG,MAAM,IAAI;AAC1D,eAAO;AAAA,MACT;AAEA,eAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,YAAI,MAAM,OAAO,CAAC,EAAE,YAAY;AAGhC,YAAI,KAAK,QAAQ,GAAG,MAAM,IAAI;AAC5B,eAAK,KAAK,GAAG;AACb,gBAAM,MACF,MAAM,OAAO,OAAO,CAAC,IACrB,OAAO,CAAC;AAAA,QACd;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAUA,aAAS,MAAO,QAAQ;AACtB,UAAI,MAAM;AACV,UAAI,OAAO,CAAC;AACZ,UAAI,QAAQ;AAGZ,eAAS,IAAI,GAAG,MAAM,OAAO,QAAQ,IAAI,KAAK,KAAK;AACjD,gBAAQ,OAAO,WAAW,CAAC,GAAG;AAAA,UAC5B,KAAK;AACH,gBAAI,UAAU,KAAK;AACjB,sBAAQ,MAAM,IAAI;AAAA,YACpB;AACA;AAAA,UACF,KAAK;AACH,iBAAK,KAAK,OAAO,UAAU,OAAO,GAAG,CAAC;AACtC,oBAAQ,MAAM,IAAI;AAClB;AAAA,UACF;AACE,kBAAM,IAAI;AACV;AAAA,QACJ;AAAA,MACF;AAGA,WAAK,KAAK,OAAO,UAAU,OAAO,GAAG,CAAC;AAEtC,aAAO;AAAA,IACT;AAUA,aAAS,KAAM,KAAK,OAAO;AACzB,UAAI,CAAC,OAAO,CAAC,IAAI,aAAa,CAAC,IAAI,WAAW;AAE5C,cAAM,IAAI,UAAU,0BAA0B;AAAA,MAChD;AAGA,UAAI,MAAM,IAAI,UAAU,MAAM,KAAK;AACnC,UAAI,SAAS,MAAM,QAAQ,GAAG,IAC1B,IAAI,KAAK,IAAI,IACb,OAAO,GAAG;AAGd,UAAK,MAAM,OAAO,QAAQ,KAAK,GAAI;AACjC,YAAI,UAAU,QAAQ,GAAG;AAAA,MAC3B;AAAA,IACF;AAAA;AAAA;;;ACpJA;AAAA,wFAAAC,UAAAC,SAAA;AAAA;AAAA,KAAC,WAAY;AAEX;AAEA,UAAI,SAAS;AACb,UAAI,OAAO;AAEX,UAAI,WAAW;AAAA,QACb,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,mBAAmB;AAAA,QACnB,sBAAsB;AAAA,MACxB;AAEA,eAAS,SAAS,GAAG;AACnB,eAAO,OAAO,MAAM,YAAY,aAAa;AAAA,MAC/C;AAEA,eAAS,gBAAgB,QAAQ,eAAe;AAC9C,YAAI,MAAM,QAAQ,aAAa,GAAG;AAChC,mBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,EAAE,GAAG;AAC7C,gBAAI,gBAAgB,QAAQ,cAAc,CAAC,CAAC,GAAG;AAC7C,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO;AAAA,QACT,WAAW,SAAS,aAAa,GAAG;AAClC,iBAAO,WAAW;AAAA,QACpB,WAAW,yBAAyB,QAAQ;AAC1C,iBAAO,cAAc,KAAK,MAAM;AAAA,QAClC,OAAO;AACL,iBAAO,CAAC,CAAC;AAAA,QACX;AAAA,MACF;AAEA,eAAS,gBAAgB,SAAS,KAAK;AACrC,YAAI,gBAAgB,IAAI,QAAQ,QAC9B,UAAU,CAAC,GACX;AAEF,YAAI,CAAC,QAAQ,UAAU,QAAQ,WAAW,KAAK;AAE7C,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO;AAAA,UACT,CAAC,CAAC;AAAA,QACJ,WAAW,SAAS,QAAQ,MAAM,GAAG;AAEnC,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO,QAAQ;AAAA,UACjB,CAAC,CAAC;AACF,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO;AAAA,UACT,CAAC,CAAC;AAAA,QACJ,OAAO;AACL,sBAAY,gBAAgB,eAAe,QAAQ,MAAM;AAEzD,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO,YAAY,gBAAgB;AAAA,UACrC,CAAC,CAAC;AACF,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO;AAAA,UACT,CAAC,CAAC;AAAA,QACJ;AAEA,eAAO;AAAA,MACT;AAEA,eAAS,iBAAiB,SAAS;AACjC,YAAI,UAAU,QAAQ;AACtB,YAAI,QAAQ,MAAM;AAChB,oBAAU,QAAQ,QAAQ,KAAK,GAAG;AAAA,QACpC;AACA,eAAO;AAAA,UACL,KAAK;AAAA,UACL,OAAO;AAAA,QACT;AAAA,MACF;AAEA,eAAS,qBAAqB,SAAS;AACrC,YAAI,QAAQ,gBAAgB,MAAM;AAChC,iBAAO;AAAA,YACL,KAAK;AAAA,YACL,OAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAEA,eAAS,wBAAwB,SAAS,KAAK;AAC7C,YAAI,iBAAiB,QAAQ,kBAAkB,QAAQ;AACvD,YAAI,UAAU,CAAC;AAEf,YAAI,CAAC,gBAAgB;AACnB,2BAAiB,IAAI,QAAQ,gCAAgC;AAC7D,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO;AAAA,UACT,CAAC,CAAC;AAAA,QACJ,WAAW,eAAe,MAAM;AAC9B,2BAAiB,eAAe,KAAK,GAAG;AAAA,QAC1C;AACA,YAAI,kBAAkB,eAAe,QAAQ;AAC3C,kBAAQ,KAAK,CAAC;AAAA,YACZ,KAAK;AAAA,YACL,OAAO;AAAA,UACT,CAAC,CAAC;AAAA,QACJ;AAEA,eAAO;AAAA,MACT;AAEA,eAAS,wBAAwB,SAAS;AACxC,YAAI,UAAU,QAAQ;AACtB,YAAI,CAAC,SAAS;AACZ,iBAAO;AAAA,QACT,WAAW,QAAQ,MAAM;AACvB,oBAAU,QAAQ,KAAK,GAAG;AAAA,QAC5B;AACA,YAAI,WAAW,QAAQ,QAAQ;AAC7B,iBAAO;AAAA,YACL,KAAK;AAAA,YACL,OAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAEA,eAAS,gBAAgB,SAAS;AAChC,YAAI,UAAU,OAAO,QAAQ,WAAW,YAAY,QAAQ,WAAW,QAAQ,OAAO,SAAS;AAC/F,YAAI,UAAU,OAAO,QAAQ;AAC3B,iBAAO;AAAA,YACL,KAAK;AAAA,YACL,OAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAEA,eAAS,aAAa,SAAS,KAAK;AAClC,iBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,IAAI,GAAG,KAAK;AAC9C,cAAI,SAAS,QAAQ,CAAC;AACtB,cAAI,QAAQ;AACV,gBAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,2BAAa,QAAQ,GAAG;AAAA,YAC1B,WAAW,OAAO,QAAQ,UAAU,OAAO,OAAO;AAChD,mBAAK,KAAK,OAAO,KAAK;AAAA,YACxB,WAAW,OAAO,OAAO;AACvB,kBAAI,UAAU,OAAO,KAAK,OAAO,KAAK;AAAA,YACxC;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,eAASC,MAAK,SAAS,KAAK,KAAK,MAAM;AACrC,YAAI,UAAU,CAAC,GACb,SAAS,IAAI,UAAU,IAAI,OAAO,eAAe,IAAI,OAAO,YAAY;AAE1E,YAAI,WAAW,WAAW;AAExB,kBAAQ,KAAK,gBAAgB,SAAS,GAAG,CAAC;AAC1C,kBAAQ,KAAK,qBAAqB,SAAS,GAAG,CAAC;AAC/C,kBAAQ,KAAK,iBAAiB,SAAS,GAAG,CAAC;AAC3C,kBAAQ,KAAK,wBAAwB,SAAS,GAAG,CAAC;AAClD,kBAAQ,KAAK,gBAAgB,SAAS,GAAG,CAAC;AAC1C,kBAAQ,KAAK,wBAAwB,SAAS,GAAG,CAAC;AAClD,uBAAa,SAAS,GAAG;AAEzB,cAAI,QAAQ,mBAAmB;AAC7B,iBAAK;AAAA,UACP,OAAO;AAGL,gBAAI,aAAa,QAAQ;AACzB,gBAAI,UAAU,kBAAkB,GAAG;AACnC,gBAAI,IAAI;AAAA,UACV;AAAA,QACF,OAAO;AAEL,kBAAQ,KAAK,gBAAgB,SAAS,GAAG,CAAC;AAC1C,kBAAQ,KAAK,qBAAqB,SAAS,GAAG,CAAC;AAC/C,kBAAQ,KAAK,wBAAwB,SAAS,GAAG,CAAC;AAClD,uBAAa,SAAS,GAAG;AACzB,eAAK;AAAA,QACP;AAAA,MACF;AAEA,eAAS,kBAAkB,GAAG;AAE5B,YAAI,kBAAkB;AACtB,YAAI,OAAO,MAAM,YAAY;AAC3B,4BAAkB;AAAA,QACpB,OAAO;AACL,4BAAkB,SAAU,KAAK,IAAI;AACnC,eAAG,MAAM,CAAC;AAAA,UACZ;AAAA,QACF;AAEA,eAAO,SAAS,eAAe,KAAK,KAAK,MAAM;AAC7C,0BAAgB,KAAK,SAAU,KAAK,SAAS;AAC3C,gBAAI,KAAK;AACP,mBAAK,GAAG;AAAA,YACV,OAAO;AACL,kBAAI,cAAc,OAAO,CAAC,GAAG,UAAU,OAAO;AAC9C,kBAAI,iBAAiB;AACrB,kBAAI,YAAY,UAAU,OAAO,YAAY,WAAW,YAAY;AAClE,iCAAiB,YAAY;AAAA,cAC/B,WAAW,YAAY,QAAQ;AAC7B,iCAAiB,SAAU,QAAQ,IAAI;AACrC,qBAAG,MAAM,YAAY,MAAM;AAAA,gBAC7B;AAAA,cACF;AAEA,kBAAI,gBAAgB;AAClB,+BAAe,IAAI,QAAQ,QAAQ,SAAU,MAAM,QAAQ;AACzD,sBAAI,QAAQ,CAAC,QAAQ;AACnB,yBAAK,IAAI;AAAA,kBACX,OAAO;AACL,gCAAY,SAAS;AACrB,oBAAAA,MAAK,aAAa,KAAK,KAAK,IAAI;AAAA,kBAClC;AAAA,gBACF,CAAC;AAAA,cACH,OAAO;AACL,qBAAK;AAAA,cACP;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAGA,MAAAD,QAAO,UAAU;AAAA,IAEnB,GAAE;AAAA;AAAA;;;AC7OF,oBAAO;AAGP,IAAAE,kBAAoB;;;ACHpB,qBAAoB;;;ACIb,IAAM,eAAe,CAAC,aAAmC;AAC9D,SAAO,CAAC,KAAc,KAAe,SAAuB;AAC1D,YAAQ,QAAQ,SAAS,KAAK,GAAG,CAAC,EAAE,MAAM,IAAI;AAAA,EAChD;AACF;;;ACRA,gBAA0D;AAE1D,IAAI,SAAsB;AAI1B,IAAM,UAAU,MAA2B;AACzC,UAAQ,IAAI,kBAAkB;AAE9B,WAAS,IAAI,eAAK;AAAA,IAChB,MAAM,QAAQ,IAAI;AAAA,IAClB,UAAU,QAAQ,IAAI;AAAA,IACtB,MAAM,QAAQ,IAAI;AAAA,IAClB,MAAM,OAAO,QAAQ,IAAI,OAAO;AAAA,IAChC,UAAU,QAAQ,IAAI;AAAA,EACxB,CAAC;AAED,MAAI;AACF,UAAM,OAAO,MAAM,YAAY;AAE/B,YAAQ,IAAI,iBAAiB;AAAA,EAC/B,SAAS,OAAO;AACd,YAAQ,MAAM,2BAA2B,KAAK;AAC9C,UAAM;AAAA,EACR;AACF;AAEO,IAAM,QAAQ,CAAsB,IAAa,OAAqF,wBAAlG,IAAa,IAAqF,mBAAlG,KAAa,QAAgB,MAAM,QAAQ,IAAI,KAAmD;AAC3I,MAAI,QAAQ;AACV,QAAI;AACF,UAAI,KAAK;AACP,gBAAQ,IAAI,KAAK,KAAK,UAAU,MAAM,CAAC;AAAA,MACzC;AACA,aAAO,MAAM,OAAO,MAAe,KAAK,MAAM;AAAA,IAChD,SAAS,OAAO;AACd,cAAQ,MAAM,gBAAgB,KAAK;AACnC,YAAM,IAAI,MAAM,gBAAgB;AAAA,IAClC;AAAA,EACF;AACA,UAAQ,IAAI,qBAAqB;AACjC,SAAO;AACT;AAEA,IAAM,aAAa,MAA2B;AAC5C,MAAI,QAAQ;AACV,YAAQ,IAAI,uBAAuB;AACnC,QAAI;AACF,YAAM,OAAO,IAAI;AACjB,cAAQ,IAAI,sBAAsB;AAAA,IACpC,SAAS,OAAO;AACd,cAAQ,MAAM,gCAAgC,KAAK;AACnD,YAAM;AAAA,IACR;AAAA,EACF,OAAO;AACL,YAAQ,IAAI,qBAAqB;AAAA,EACnC;AACF;AAEA,IAAO,aAAQ,EAAE,SAAS,WAAW;;;ACvDrC,+BAA4B;AA2BrB,IAAM,kBAAkB,aAAa,CAAO,KAAsB,QAAiC;AA9B1G;AA+BE,QAAM,eAAsB,CAAC;AAC7B,QAAM,cAAqB,CAAC;AAC5B,MAAI,aAAqB;AACzB,MAAI,cAAsB;AAC1B,MAAI,YAAgC,IAAI,MAAM;AAE9C,MAAI,WAAW;AACb,iBAAa,KAAK,kBAAkB,YAAY,SAAS,CAAC,sBAAsB,YAAY,SAAS,CAAC,EAAE;AACxG,gBAAY,KAAK,IAAI,SAAS,GAAG;AAAA,EACnC;AACA,QAAM,QAAQ,SAAS,IAAI,MAAM,OAAiB,EAAE,KAAK;AACzD,QAAM,OAAO,SAAS,IAAI,MAAM,MAAgB,EAAE,KAAK;AAEvD,eAAa,UAAU,YAAY,SAAS,CAAC;AAC7C,cAAY,KAAK,KAAK;AAEtB,gBAAc,WAAW,YAAY,SAAS,CAAC;AAC/C,cAAY,MAAM,OAAO,KAAK,KAAK;AAEnC,QAAM,cAAc,aAAa,SAAS,IAAI,YAAY,aAAa,KAAK,OAAO,IAAI;AAEvF,QAAM,cAAc;AAAA;AAAA;AAAA;AAAA,MAIhB,WAAW;AAAA;AAAA,MAEX,UAAU;AAAA,MACV,WAAW;AAAA;AAGf,QAAM,mBAAmB;AAAA;AAAA;AAAA;AAAA,MAIrB,WAAW;AAAA;AAAA;AAIf,QAAM,SAAS,MAAM,MAAgB,aAAa,WAAW;AAE7D,QAAM,cAAc,MAAM,MAAyB,kBAAkB,YAAY,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC;AAEtG,QAAM,eAAe,WAAS,gDAAa,KAAK,OAAlB,mBAAsB,UAAS,CAAC;AAC9D,QAAM,aAAa,KAAK,KAAK,eAAe,KAAK;AACjD,QAAM,cAAc;AAEpB,QAAM,kBAOD;AAAA,IACH,QAAQ,qCAAY;AAAA,IACpB,SAAS;AAAA,IACT,MAAM;AAAA,MACJ,YAAY;AAAA,MACZ,WAAW,iCAAQ;AAAA,MACnB;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAQ,aAAa;AAAA,IACvB;AAAA,EACF;AAEA,MAAI,OAAO,qCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;AAIM,IAAM,kBAAkB,aAAa,CAAO,KAAc,QAAiC;AAChG,QAAM,UAAU,IAAI,OAAO;AAE3B,QAAM,SAAS,MAAM;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA,CAAC,OAAO;AAAA,EACV;AAEA,QAAM,kBAA+C;AAAA,IACnD,QAAQ,qCAAY;AAAA,IACpB,SAAS;AAAA,IACT,MAAM,SAAU,OAAO,OAAQ,CAAC;AAAA,EAClC;AAEA,MAAI,OAAO,qCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;AAIM,IAAM,iBAAiB,aAAa,CAAO,KAAc,QAAiC;AAC/F,QAAM,UAAkB,SAAS,IAAI,OAAO,OAAO;AAEnD,QAAM;AAAA,IACJ;AAAA,IACA,CAAC,OAAO;AAAA,EACV;AAEA,QAAM,kBAA+C;AAAA,IACnD,QAAQ,qCAAY;AAAA,IACpB,SAAS;AAAA,IACT,SAAS,gBAAgB,OAAO;AAAA,EAClC;AAEA,MAAI,OAAO,qCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;AAIM,IAAM,iBAAiB,aAAa,CAAO,KAAsB,QAAiC;AACvG,QAAM,EAAE,OAAO,WAAW,UAAU,UAAU,QAAQ,IAAI,IAAI;AAE9D,QAAM,SAAS,MAAM;AAAA,IACnB;AAAA,IACA,CAAC,OAAO,WAAW,UAAU,UAAU,OAAO;AAAA,EAChD;AAEA,QAAM,kBAA6C;AAAA,IACjD,QAAQ,qCAAY;AAAA,IACpB,SAAS;AAAA,IACT,SAAS;AAAA,IACT,MAAM,iCAAQ,KAAK,GAAG;AAAA,EACxB;AAEA,MAAI,OAAO,qCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;AAIM,IAAM,gBAAgB,aAAa,CAAO,KAAsB,QAAkB;AAtKzF;AAuKE,MAAI,UAAU,OAAO,CAAC;AAEtB,MAAI,IAAI,OAAO,SAAS;AACtB,cAAU,SAAS,IAAI,OAAO,OAAO;AAAA,EACvC,OAAO;AAEL,UAAMC,WAAU;AAAA,EAClB;AAEA,QAAM,EAAE,OAAO,WAAW,UAAU,SAAS,IAAI,IAAI;AAErD,QAAM,SAAQ,SAAI,UAAJ,mBAAW;AACzB,MAAI,aAA4B;AAEhC,MAAI,OAAO;AACT,QAAI,CAAC,SAAS,KAAK,MAAM,QAAQ,EAAG,OAAM,IAAI,MAAM,+BAA+B;AAEnF,iBAAa,MAAM;AACnB,UAAM,GAAG,YAAY,kBAAkB,UAAU;AAAA,EACnD;AAEA,QAAM,SAAS,MAAM;AAAA,IACnB;AAAA,IACA,CAAC,OAAO,WAAW,UAAU,UAAU,YAAY,OAAO;AAAA,EAC5D;AAEA,QAAM,kBAA6C;AAAA,IACjD,QAAQ,qCAAY;AAAA,IACpB,SAAS;AAAA,IACT,SAAS;AAAA,IACT,MAAM,iCAAQ,KAAK,GAAG;AAAA,EACxB;AAEA,MAAI,OAAO,qCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;;;ACxMD,iBAA4B;AAE5B,IAAAC,4BAA4B;AAGrB,SAAS,aAAa,QAA+B;AAC1D,SAAO,CAAC,KAAc,KAAe,SAAuB;AAC1D,QAAI;AACF,aAAO,MAAM,IAAI,IAAI;AACrB,WAAK;AAAA,IACP,SAAS,OAAO;AACd,UAAI,iBAAiB,qBAAU;AAC7B,cAAM,gBAAgB,MAAM,OAAO,OAAO,CAAC,KAAU,UAAe;AAClE,cAAI,MAAM,KAAK,KAAK,GAAG,CAAC,IAAI,MAAM;AAClC,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAEL,cAAM,gBAA+B;AAAA,UACnC,QAAQ,sCAAY;AAAA,UACpB,SAAS;AAAA,QACX;AAEA,YAAI,OAAO,sCAAY,WAAW,EAAE,KAAK,aAAa;AAAA,MACxD,OAAO;AACL,YAAI,OAAO,sCAAY,qBAAqB,EAAE,KAAK,EAAE,OAAO,wBAAwB,CAAC;AAAA,MACvF;AAAA,IACF;AAAA,EACF;AACF;;;AC7BA,IAAAC,cAAkB;AAEX,IAAM,mBAAmB,cAAE,OAAO;AAAA,EACvC,OAAO,cAAE,OAAO,EAAE,SAAS,8BAA8B,CAAC,EACvD,MAAM,EAAE,SAAS,uCAAuC,CAAC,EACzD,IAAI,GAAG,EAAE,SAAS,kCAAkC,CAAC,EACrD,IAAI,KAAK,EAAE,SAAS,iDAAiD,CAAC;AAAA,EAEzE,UAAU,cAAE,OAAO,EAAE,SAAS,iCAAiC,CAAC,EAC7D,IAAI,GAAG,EAAE,SAAS,qCAAqC,CAAC,EACxD,IAAI,KAAK,EAAE,SAAS,4CAA4C,CAAC;AAAA,EAEpE,WAAW,cAAE,OAAO,EAAE,SAAS,kCAAkC,CAAC,EAC/D,IAAI,GAAG,EAAE,SAAS,sCAAsC,CAAC,EACzD,IAAI,KAAK,EAAE,SAAS,6CAA6C,CAAC;AAAA,EAErE,UAAU,cAAE,OAAO,EAAE,SAAS,iCAAiC,CAAC,EAC7D,IAAI,GAAG,EAAE,SAAS,qCAAqC,CAAC,EACxD,IAAI,KAAK,EAAE,SAAS,4CAA4C,CAAC;AAAA,EAEpE,SAAS,cAAE,OAAO,EAAE,SAAS,gCAAgC,CAAC,EAC3D,IAAI,GAAG,EAAE,SAAS,6BAA6B,CAAC;AACrD,CAAC;AAEM,IAAM,0BAA0B,cAAE,OAAO;AAAA,EAC9C,OAAO,cAAE,OAAO,EAAE,SAAS,8BAA8B,CAAC,EACvD,MAAM,EAAE,SAAS,uCAAuC,CAAC,EACzD,IAAI,GAAG,EAAE,SAAS,kCAAkC,CAAC,EACrD,IAAI,KAAK,EAAE,SAAS,iDAAiD,CAAC;AAAA,EAEzE,UAAU,cAAE,OAAO,EAAE,SAAS,iCAAiC,CAAC,EAC7D,IAAI,GAAG,EAAE,SAAS,qCAAqC,CAAC,EACxD,IAAI,KAAK,EAAE,SAAS,4CAA4C,CAAC;AAAA,EAEpE,WAAW,cAAE,OAAO,EAAE,SAAS,kCAAkC,CAAC,EAC/D,IAAI,GAAG,EAAE,SAAS,sCAAsC,CAAC,EACzD,IAAI,KAAK,EAAE,SAAS,6CAA6C,CAAC;AAAA,EAErE,UAAU,cAAE,OAAO,EAAE,SAAS,iCAAiC,CAAC,EAC7D,IAAI,GAAG,EAAE,SAAS,qCAAqC,CAAC,EACxD,IAAI,KAAK,EAAE,SAAS,4CAA4C,CAAC;AACtE,CAAC;;;ALrCD,IAAM,QAAQ,eAAAC,QAAQ,OAAO;AAE7B,MAAM,IAAI,KAAK,eAAe;AAC9B,MAAM,KAAK,KAAK,aAAa,gBAAgB,GAAG,cAAc;AAC9D,MAAM,OAAO,aAAa,cAAc;AACxC,MAAM,IAAI,aAAa,eAAe;AACtC,MAAM,IAAI,cAAc,aAAa,uBAAuB,GAAG,aAAa;AAE5E,IAAO,yBAAQ;;;AMZf,IAAAC,kBAAoB;;;ACGpB,IAAAC,4BAA4B;;;ACC5B,IAAM,wBAAwB,CAAC,OAAa,QAAsB;AAChE,MAAI,SAAS,KAAK;AAChB,UAAM,IAAI,MAAM,mCAAmC;AAAA,EACrD;AAEA,QAAM,2BAA2B,IAAI,QAAQ,IAAI,MAAM,QAAQ;AAE/D,QAAM,oBAAoB,4BAA4B,MAAO,KAAK;AAElE,SAAO;AACT;AAGA,IAAM,cAAc,CAAC,SAAe;AAClC,QAAM,OAAO,KAAK,YAAY;AAC9B,QAAM,QAAQ,OAAO,KAAK,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,QAAM,MAAM,OAAO,KAAK,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG;AAElD,QAAM,gBAAgB,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAE7C,SAAO;AACT;AAEO,IAAM,uBAAuB,CAAC,UAAwC;AAC3E,QAAM,aAAwC,CAAC;AAE/C,QAAM,QAAQ,CAAC,SAAS;AACtB,UAAM,OAAO,YAAY,KAAK,KAAK;AACnC,QAAI,CAAC,WAAW,IAAI,GAAG;AACrB,iBAAW,IAAI,IAAI;AAAA,IACrB;AACA,eAAW,IAAI,KAAK,sBAAsB,KAAK,OAAO,KAAK,GAAG;AAAA,EAChE,CAAC;AAED,QAAM,SAAS,OAAO,KAAK,UAAU,EAAE,KAAK;AAC5C,QAAM,SAAS,OAAO,IAAI,UAAQ,WAAW,IAAI,CAAC;AAElD,SAAO,EAAE,QAAQ,OAAO;AAC1B;AAEO,IAAM,qBAAqB,CAAO,QAAgB,SAAiB,SAAS;AA5CnF;AA8CE,MAAI,oBAA4B;AAEhC,UAAQ,QAAQ;AAAA,IACd,KAAK;AACH,0BAAoB;AACpB;AAAA,IACF,KAAK;AACH,0BAAoB;AACpB;AAAA,IACF;AACE;AAAA,EACJ;AAEA,QAAM,WAAW;AAAA;AAAA;AAAA,MAGb,iBAAiB;AAAA;AAGrB,QAAM,aAAa,MAAM,MAGtB,UAAU,CAAC,MAAM,CAAC;AAErB,UAAO,8CAAY,SAAZ,YAAoB,CAAC;AAC9B;;;AD9CO,IAAM,WAAW,aAAa,CAAO,KAAkB,QAAkB;AAC9E,QAAM,QAAQ,IAAI,KAAK;AAEvB,QAAM,UAAU;AAEhB,MAAI;AACF,UAAM,MAAM,OAAO;AAEnB,UAAM,IAAc,CAAC;AACrB,UAAM,SAAmB,CAAC;AAC1B,mCAAO,QAAQ,CAAC,MAAM,UAAU;AAC9B,YAAM,YAAY,QAAQ;AAC1B,QAAE,KAAK,KAAK,YAAY,CAAC,MAAM,YAAY,CAAC,MAAM,YAAY,CAAC,MAAM,YAAY,CAAC,MAAM,YAAY,CAAC,GAAG;AAExG,aAAO,KAAK,GAAG,KAAK,OAAO,EAAE;AAC7B,aAAO,KAAK,GAAG,KAAK,WAAW,EAAE;AACjC,aAAO,KAAK,GAAG,KAAK,KAAK,EAAE;AAC3B,aAAO,KAAK,GAAG,KAAK,GAAG,EAAE;AACzB,aAAO,KAAK,GAAG,OAAO,EAAE;AAAA,IAC1B;AAEA,UAAM,WAAW,4EAA4E,EAAE,KAAK,IAAI,IAAI;AAE5G,UAAM,cAAc,MAAM,MAAY,UAAU,MAAM;AACtD,UAAM,MAAM,QAAQ;AAEpB,UAAM,kBAA2C;AAAA,MAC/C,QAAQ,sCAAY;AAAA,MACpB,SAAS;AAAA,MACT,SAAS,uCAAuC,OAAO;AAAA,MACvD,MAAM,2CAAa;AAAA,IACrB;AAEA,QAAI,OAAO,sCAAY,EAAE,EAAE,KAAK,eAAe;AAAA,EACjD,SAAS,OAAO;AACd,UAAM,MAAM,UAAU;AAEtB,UAAM,gBAA+B;AAAA,MACnC,QAAQ,sCAAY;AAAA,MACpB,SAAS;AAAA,IACX;AAEA,QAAI,OAAO,sCAAY,qBAAqB,EAAE,KAAK,aAAa;AAAA,EAClE;AACF,EAAC;AAIM,IAAM,kBAAkB,aAAa,CAAO,KAAkB,QAAkB;AAErF,QAAM,UAAU;AAEhB,QAAM,cAAc,MAAM,mBAAmB,OAAO;AAEpD,QAAM,kBAA2C;AAAA,IAC/C,QAAQ,sCAAY;AAAA,IACpB,SAAS;AAAA,IACT,MAAM;AAAA,EACR;AAEA,MAAI,OAAO,sCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;AAIM,IAAM,aAAa,aAAa,CAAO,KAAc,QAAkB;AAC5E,QAAM,UAAU,OAAO,IAAI,OAAO,OAAO;AAEzC,QAAM;AAAA,IACJ;AAAA,IACA,CAAC,OAAO;AAAA,EACV;AAEA,QAAM,kBAAwC;AAAA,IAC5C,QAAQ,sCAAY;AAAA,IACpB,SAAS;AAAA,IACT,SAAS,gBAAgB,OAAO;AAAA,EAClC;AAEA,MAAI,OAAO,sCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;;;AEzGD,IAAAC,cAAkB;AAElB,IAAM,iBAAiB,cAAE,OAAO;AAAA,EAC9B,SAAS,cAAE,OAAO,EACf,IAAI,GAAG,EAAE,SAAS,2BAA2B,CAAC;AAAA,EACjD,aAAa,cAAE,OAAO,EACnB,IAAI,GAAG,EAAE,SAAS,0BAA0B,CAAC;AAAA,EAChD,OAAO,cAAE,OAAO,EACb,IAAI,GAAG,EAAE,SAAS,yBAAyB,CAAC;AAAA,EAC/C,KAAK,cAAE,OAAO,EACX,IAAI,GAAG,EAAE,SAAS,uBAAuB,CAAC;AAC/C,CAAC;AAEM,IAAM,iBAAiB,cAAE,OAAO;AAAA,EACrC,MAAM,cAAE,MAAM,cAAc,EACzB,IAAI,GAAG,EAAE,SAAS,qCAAqC,CAAC;AAC7D,CAAC;;;AHZD,IAAMC,SAAQ,gBAAAC,QAAQ,OAAO;AAE7BD,OAAM,KAAK,KAAK,aAAa,cAAc,GAAG,QAAQ;AACtDA,OAAM,IAAI,KAAK,eAAe;AAC9BA,OAAM,OAAO,aAAa,UAAU;AAEpC,IAAO,qBAAQA;;;AIVf,IAAAE,kBAAoB;;;ACGpB,IAAAC,4BAA4B;AAerB,IAAM,eAAe,aAAa,CAAO,KAAc,QAAkB;AAC9E,QAAM,UAAU;AAChB,QAAM,QAAgB,IAAI,OAAO;AAEjC,MAAI;AAEJ,UAAQ,OAAO;AAAA,IACb,KAAK;AACH,qBAAe,MAAM,YAAY,OAAO;AACxC;AAAA,IACF,KAAK;AACH,qBAAe,MAAM,YAAY,OAAO;AACxC;AAAA,IACF;AACE,YAAM,gBAA+B;AAAA,QACnC,QAAQ,sCAAY;AAAA,QACpB,SAAS;AAAA,MACX;AAEA,UAAI,OAAO,sCAAY,WAAW,EAAE,KAAK,aAAa;AACtD;AAAA,EACJ;AAEA,QAAM,kBAAwE;AAAA,IAC5E,QAAQ,sCAAY;AAAA,IACpB,SAAS;AAAA,IACT,MAAM;AAAA,EACR;AAEA,MAAI,OAAO,sCAAY,EAAE,EAAE,KAAK,eAAe;AACjD,EAAC;AAED,IAAM,cAAc,CAAO,YAAoB;AAC7C,QAAM,CAAC,cAAc,WAAW,IAAI,MAAM,QAAQ,IAAI;AAAA,IACpD,mBAAmB,SAAS,SAAS;AAAA,IACrC,mBAAmB,SAAS,QAAQ;AAAA,EACtC,CAAC;AAED,QAAM,EAAE,QAAQ,cAAc,IAAI,qBAAqB,YAAY;AACnE,QAAM,EAAE,QAAQ,aAAa,IAAI,qBAAqB,WAAW;AAGjE,QAAM,cAAc,aAAa,OAAO,CAAC,QAAQ,QAAQ;AACvD,WAAO,SAAS;AAAA,EAClB,GAAG,CAAC;AAEJ,QAAM,eAAe,cAAc,OAAO,CAAC,QAAQ,QAAQ;AACzD,WAAO,SAAS;AAAA,EAClB,GAAG,CAAC;AAEJ,SAAO,EAAE,aAAa,aAAa;AACrC;AAEA,IAAM,cAAc,CAAO,YAAoB;AAC7C,QAAM,QAAQ,MAAM,mBAAmB,SAAS,QAAQ;AAExD,QAAM,EAAE,QAAQ,OAAO,IAAI,qBAAqB,KAAK;AAErD,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;;;AD9EA,IAAMC,SAAQ,gBAAAC,QAAQ,OAAO;AAE7BD,OAAM,IAAI,WAAW,YAAY;AAEjC,IAAO,sBAAQA;;;AENf,IAAAE,kBAAoB;;;ACGpB,IAAAC,4BAA4B;AAE5B,0BAAgB;AAkBT,IAAM,QAAQ,aAAa,CAAO,KAAmB,QAAkB;AAC5E,QAAM,EAAE,OAAO,SAAS,IAAI,IAAI;AAEhC,QAAM,SAAS,MAAM;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA,IAIA,CAAC,OAAO,QAAQ;AAAA,EAClB;AAEA,OAAI,iCAAQ,YAAW,GAAG;AACxB,UAAM,gBAA+B;AAAA,MACnC,QAAQ,sCAAY;AAAA,MACpB,SAAS;AAAA,IACX;AACA,WAAO,IAAI,OAAO,sCAAY,WAAW,EAAE,KAAK,aAAa;AAAA,EAC/D;AAEA,QAAM,OAAO,iCAAQ,KAAK,GAAG;AAE7B,QAAM,QAAQ,oBAAAC,QAAI,KAAK,EAAE,KAAK,GAAG,QAAQ,EAAE,WAAW,KAAK,CAAC;AAE5D,QAAM,kBAAwC;AAAA,IAC5C,QAAQ,sCAAY;AAAA,IACpB,SAAS;AAAA,IACT,SAAS;AAAA,IACT,MAAM;AAAA,EACR;AAEA,MAAI,OAAO,gBAAgB,GAAG,KAAK,IAAI;AAAA,IACrC,UAAU;AAAA,IACV,QAAQ;AAAA,EACV,CAAC,EAAE,OAAO,sCAAY,EAAE,EAAE,KAAK,eAAe;AAChD,EAAC;AAEM,IAAM,SAAS,CAAC,KAAc,QAAkB;AACrD,QAAM,kBAAwC;AAAA,IAC5C,QAAQ,sCAAY;AAAA,IACpB,SAAS;AAAA,IACT,SAAS;AAAA,EACX;AAEA,SAAO,IACJ,YAAY,cAAc,EAC1B,OAAO,sCAAY,EAAE,EACrB,KAAK,eAAe;AACzB;;;ADpEA,IAAMC,SAAQ,gBAAAC,QAAQ,OAAO;AAE7BD,OAAM,KAAK,KAAK,KAAK;AACrBA,OAAM,KAAK,WAAW,MAAM;AAE5B,IAAO,qBAAQA;;;AbCf,kBAAiB;AACjB,oBAAmB;;;AePnB,IAAAE,4BAA4B;AAErB,IAAM,kBAAkB,CAAC,KAAc,QAAkB;AAC9D,QAAM,WAA0B;AAAA,IAC9B,QAAQ,sCAAY;AAAA,IACpB,SAAS,cAAc,IAAI,WAAW;AAAA,EACxC;AAEA,MAAI,OAAO,GAAG,EAAE,KAAK,QAAQ;AAC/B;;;ACTA,IAAAC,4BAA4B;AAErB,IAAM,eAAe,CAAC,OAAc,KAAc,KAAe,SAA4B;AAClG,QAAM,WAA0B;AAAA,IAC9B,QAAQ,sCAAY;AAAA,IACpB,SAAS,MAAM;AAAA,EACjB;AAEA,UAAQ,IAAI,KAAK;AAEjB,SAAO,IAAI,OAAO,sCAAY,qBAAqB,EAAE,KAAK,QAAQ;AACpE;;;AhBCA,gCAAuB;AACvB,2BAAyB;AAdzB,QAAQ,QAAQ,EAAE,OAAO;AAgBzB,IAAMC,gBAAe,MAAY;AAC/B,QAAM,WAAG,QAAQ;AACjB,QAAM,UAAM,gBAAAC,SAAQ;AACpB,QAAM,OAAO,QAAQ,IAAI,QAAQ;AAEjC,MAAI,QAAI,qBAAAC,SAAa,CAAC;AACtB,MAAI,QAAI,cAAAC,SAAO,CAAC;AAChB,MAAI,QAAI,YAAAC,SAAK,CAAC;AACd,MAAI,QAAI,0BAAAC,SAAW;AAAA,IACjB,QAAQ;AAAA,MACN,UAAU;AAAA,IACZ;AAAA,IACA,cAAc;AAAA,EAChB,CAAC,CAAC;AACF,MAAI,IAAI,gBAAAJ,QAAQ,KAAK,CAAC;AACtB,MAAI,IAAI,gBAAAA,QAAQ,WAAW,EAAE,UAAU,KAAK,CAAC,CAAC;AAE9C,MAAI,IAAI,gBAAAA,QAAQ,OAAO,QAAQ,CAAC;AAEhC,MAAI,IAAI,cAAc,kBAAU;AAChC,MAAI,IAAI,mBAAmB,sBAAc;AACzC,MAAI,IAAI,eAAe,kBAAU;AACjC,MAAI,IAAI,gBAAgB,mBAAW;AAEnC,MAAI,IAAI,eAAe;AACvB,MAAI,IAAI,YAAY;AAEpB,MAAI;AAAA,IAAO;AAAA,IAAM,MACf,QAAQ,IAAI,yCAAyC,IAAI,EAAE;AAAA,EAC7D;AAEF;AAEA,KAAKD,cAAa;","names":["exports","module","exports","module","exports","module","cors","import_express","user_id","import_http_status_codes","import_zod","express","import_express","import_http_status_codes","import_zod","route","express","import_express","import_http_status_codes","route","express","import_express","import_http_status_codes","jwt","route","express","import_http_status_codes","import_http_status_codes","asyncHandler","express","cookieParser","helmet","cors","fileUpload"]}